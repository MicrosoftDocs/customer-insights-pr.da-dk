---
title: Eksperimenter i Machine Learning Studio (klassisk)
description: Brug Machine Learning Studio (klassisk)-modeller i Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: da-DK
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669011"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="6d03d-103">Brug modeller baseret på Azure Machine Learning Studio (klassisk)</span><span class="sxs-lookup"><span data-stu-id="6d03d-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="6d03d-104">De samlede data i Dynamics 365 Customer Insights er en kilde til opbygning af maskinelle indlæringsmodeller, der kan generere yderligere forretningsindsigt.</span><span class="sxs-lookup"><span data-stu-id="6d03d-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="6d03d-105">Customer Insights er integreret med Machine Learning Studio (classic) til brug af dine egne brugerdefinerede modeller.</span><span class="sxs-lookup"><span data-stu-id="6d03d-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="6d03d-106">Hvis du vil se, hvordan modeller, der er udviklet i Azure Machine Learning, er integreret med Customer Insights, kan du gå til [Azure Machine Learning-eksperimenter](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="6d03d-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="6d03d-107">Forudsætninger</span><span class="sxs-lookup"><span data-stu-id="6d03d-107">Prerequisites</span></span>

- <span data-ttu-id="6d03d-108">Adgang til Customer Insights</span><span class="sxs-lookup"><span data-stu-id="6d03d-108">Access to Customer Insights</span></span>
- <span data-ttu-id="6d03d-109">Aktivt abonnement på Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="6d03d-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="6d03d-110">Samlede kundeprofiler</span><span class="sxs-lookup"><span data-stu-id="6d03d-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="6d03d-111">Konfiguration af [Eksport af objekter til Azure Blob Storage](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="6d03d-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="6d03d-112">Konfiguration af Machine Learning Studio, klassisk</span><span class="sxs-lookup"><span data-stu-id="6d03d-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="6d03d-113">I første trin skal vi oprette et arbejdsområde, som Machine Learning Studio (classic) kan åbnes i.</span><span class="sxs-lookup"><span data-stu-id="6d03d-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="6d03d-114">Gå til [https://www.portal.azure.com](https://www.portal.azure.com/), og log på.</span><span class="sxs-lookup"><span data-stu-id="6d03d-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="6d03d-115">Vælg **Opret en ressource**.</span><span class="sxs-lookup"><span data-stu-id="6d03d-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="6d03d-116">Søg i **Machine Learning Studio-arbejdsområde**, og vælg **Opret**.</span><span class="sxs-lookup"><span data-stu-id="6d03d-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="6d03d-117">Angiv de nødvendige detaljer for at [oprette arbejdsområdet](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="6d03d-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="6d03d-118">Vælg **Prissætningsniveau for webtjenesteplan** baseret på den mængde data, du vil importere.</span><span class="sxs-lookup"><span data-stu-id="6d03d-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="6d03d-119">Du opnår den bedste ydeevne, hvis du vælger den **Placering**, der er geografisk nærmest.</span><span class="sxs-lookup"><span data-stu-id="6d03d-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="6d03d-120">Når ressourcen er oprettet, vises dashboardet i arbejdsområdet for Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="6d03d-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="6d03d-121">Vælg **Start Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="6d03d-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Brugergrænsefladen i Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="6d03d-123">Arbejde med Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="6d03d-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="6d03d-124">Du kan nu oprette et nyt eksperiment eller importere en fra en eksisterende eksperimentskabelon fra eksempelgalleriet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="6d03d-125">Der findes prøveeksperimenter i tre standardscenarier:</span><span class="sxs-lookup"><span data-stu-id="6d03d-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="6d03d-126">Forudsigelse af afgang</span><span class="sxs-lookup"><span data-stu-id="6d03d-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="6d03d-127">Kundens levetidsværdi</span><span class="sxs-lookup"><span data-stu-id="6d03d-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="6d03d-128">Produktanbefaling eller næstbedste handling</span><span class="sxs-lookup"><span data-stu-id="6d03d-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="6d03d-129">Hvis du opretter et nyt eksperiment eller bruger en eksperimentskabelon fra galleriet, skal du konfigurere egenskaberne for **Importér data**.</span><span class="sxs-lookup"><span data-stu-id="6d03d-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="6d03d-130">Brug automatiseret oplevelse, eller angiv direkte oplysninger for at få adgang til det Azure Blob Storage, der indeholder dine data.</span><span class="sxs-lookup"><span data-stu-id="6d03d-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning Studio-eksperiment](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="6d03d-132">Nu kan du oprette en brugerdefineret behandlingspipeline for at rense og forbehandle dataene, udtrække funktioner og oplære en egnet model.</span><span class="sxs-lookup"><span data-stu-id="6d03d-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="6d03d-133">Test og optimer modellens ydeevne.</span><span class="sxs-lookup"><span data-stu-id="6d03d-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="6d03d-134">Når du er tilfreds med kvaliteten af en model, skal du vælge **Konfigurer webtjeneste** > **Webtjeneste til forudsigelse**.</span><span class="sxs-lookup"><span data-stu-id="6d03d-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="6d03d-135">Denne indstilling importerer den oplærte model og din pipeline til videreudvikling af funktioner fra oplæringseksperimentet til en forudsigelsestjeneste.</span><span class="sxs-lookup"><span data-stu-id="6d03d-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="6d03d-136">Forudsigelsestjenesten kan anvende et andet sæt inputdata i det skema, der bruges i oplæringseksperimentet, til at levere forudsigelser.</span><span class="sxs-lookup"><span data-stu-id="6d03d-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Konfigurere en webtjeneste til forudsigelse](media/predictive-webservice-control.png)

1. <span data-ttu-id="6d03d-138">Når forudsigelseseksperimentet på webtjenesten er vellykket udført, kan du implementere det til automatisk planlægning.</span><span class="sxs-lookup"><span data-stu-id="6d03d-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="6d03d-139">Hvis webtjenesten skal fungere sammen med Customer Insights, skal du vælge **Installer webtjeneste** > **Installer prøveversion af webtjeneste [ny]**.</span><span class="sxs-lookup"><span data-stu-id="6d03d-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="6d03d-140">[Få mere at vide om installation af webtjeneste](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="6d03d-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Installere en webtjeneste til forudsigelse](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="6d03d-142">Eksempelmodeller fra galleriet</span><span class="sxs-lookup"><span data-stu-id="6d03d-142">Sample models from the gallery</span></span>

<span data-ttu-id="6d03d-143">Vi bruger et fiktivt scenario med Contoso Hotel til modellerne i denne artikel.</span><span class="sxs-lookup"><span data-stu-id="6d03d-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="6d03d-144">Contoso Hotel indsamler følgende data:</span><span class="sxs-lookup"><span data-stu-id="6d03d-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="6d03d-145">CRM-data, der består af aktivitet under hotelophold.</span><span class="sxs-lookup"><span data-stu-id="6d03d-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="6d03d-146">Datasættet indeholder oplysninger om datoerne for hver registreret kundes ophold.</span><span class="sxs-lookup"><span data-stu-id="6d03d-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="6d03d-147">Det indeholder også oplysninger om reservation, værelsestyper, detaljer om forbrug osv.</span><span class="sxs-lookup"><span data-stu-id="6d03d-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="6d03d-148">Dataene strækker sig over fire år, fra januar 2014 til januar 2018.</span><span class="sxs-lookup"><span data-stu-id="6d03d-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="6d03d-149">Kundeprofiler for hotelgæster.</span><span class="sxs-lookup"><span data-stu-id="6d03d-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="6d03d-150">Disse profiler indeholder oplysninger om hver enkelt kunde, herunder navn, fødselsdato, postadresse, køn og telefonnummer.</span><span class="sxs-lookup"><span data-stu-id="6d03d-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="6d03d-151">Brug af servicer, der tilbydes af hotellet, f.eks. spa, vask, WiFi eller kurer.</span><span class="sxs-lookup"><span data-stu-id="6d03d-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="6d03d-152">Disse oplysninger logføres for hver registrerede kunde.</span><span class="sxs-lookup"><span data-stu-id="6d03d-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="6d03d-153">Brug af servicer er typisk knyttet til opholdet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="6d03d-154">I nogle tilfælde kan servicer bruges af kunder, der ikke bor på hotellet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="6d03d-155">Afgangsanalyse</span><span class="sxs-lookup"><span data-stu-id="6d03d-155">Churn Analysis</span></span>

<span data-ttu-id="6d03d-156">Afgangsanalyse gælder for forskellige forretningsområder.</span><span class="sxs-lookup"><span data-stu-id="6d03d-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="6d03d-157">I dette eksempel ser vi på ophør af brug af en tjeneste, særligt i forbindelse med hoteltjenester, som beskrevet ovenfor.</span><span class="sxs-lookup"><span data-stu-id="6d03d-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="6d03d-158">Eksemplet indeholder et arbejdseksempel på en komplet modelpipeline, der kan bruges som udgangspunkt for alle andre afgangsmodeltyper.</span><span class="sxs-lookup"><span data-stu-id="6d03d-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="6d03d-159">Definition af afgang</span><span class="sxs-lookup"><span data-stu-id="6d03d-159">Definition of Churn</span></span>

<span data-ttu-id="6d03d-160">Definitionen af afgang kan variere afhængigt af scenariet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="6d03d-161">I dette eksempel skal en gæst, som ikke har besøgt hotellet inden for det seneste år, betragtes som værende forsvundet som kunde.</span><span class="sxs-lookup"><span data-stu-id="6d03d-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="6d03d-162">Eksperimentskabelonen kan importeres fra galleriet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="6d03d-163">Du skal først sikre dig, at du importerer dataene for **Aktivitet under hotelophold**, **Kundedata** og **Serviceforbrugsdata** fra Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="6d03d-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importere data til afgangsmodel](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="6d03d-165">Videreudvikling af funktioner</span><span class="sxs-lookup"><span data-stu-id="6d03d-165">Featurization</span></span>

<span data-ttu-id="6d03d-166">På baggrund af definitionen af afgang skal vi først identificere de rå funktioner, som har indflydelse på navnet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="6d03d-167">Derefter behandler vi disse rå funktioner i numeriske funktioner, der kan bruges sammen med de maskinelle indlæringsmodeller.</span><span class="sxs-lookup"><span data-stu-id="6d03d-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="6d03d-168">Dataintegration sker i Customer Insights, så vi kan forbinde disse tabeller ved hjælp af *Kunde-id*.</span><span class="sxs-lookup"><span data-stu-id="6d03d-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Joinforbinde importerede data](media/join-imported-data.png)

<span data-ttu-id="6d03d-170">Videreudvikling af funktioner til opbygning af modellen til afgangsanalyse kan være lidt vanskelig.</span><span class="sxs-lookup"><span data-stu-id="6d03d-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="6d03d-171">Disse data er en funktion af tid, hvor der registreres nye hotelaktiviteter dagligt.</span><span class="sxs-lookup"><span data-stu-id="6d03d-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="6d03d-172">Under videreudviklingen af funktionerne vil vi generere statiske funktioner ud fra de dynamiske data.</span><span class="sxs-lookup"><span data-stu-id="6d03d-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="6d03d-173">I dette tilfælde skal vi generere flere funktioner ud fra hotelaktivitet med et glidende vindue på ét år.</span><span class="sxs-lookup"><span data-stu-id="6d03d-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="6d03d-174">Vi vil også udvide kategorifunktionerne, f.eks. værelsestype eller reservationstype i separate funktioner ved hjælp af engangskodning.</span><span class="sxs-lookup"><span data-stu-id="6d03d-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="6d03d-175">Endelig liste over funktioner:</span><span class="sxs-lookup"><span data-stu-id="6d03d-175">Final list of features:</span></span>

| <span data-ttu-id="6d03d-176">**Tal**</span><span class="sxs-lookup"><span data-stu-id="6d03d-176">**Number**</span></span>  | <span data-ttu-id="6d03d-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="6d03d-177">**Original_Column**</span></span>          | <span data-ttu-id="6d03d-178">**Afledte funktioner**</span><span class="sxs-lookup"><span data-stu-id="6d03d-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="6d03d-179">1</span><span class="sxs-lookup"><span data-stu-id="6d03d-179">1</span></span>           | <span data-ttu-id="6d03d-180">Værelsestype</span><span class="sxs-lookup"><span data-stu-id="6d03d-180">Room Type</span></span>                    | <span data-ttu-id="6d03d-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="6d03d-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="6d03d-182">2</span><span class="sxs-lookup"><span data-stu-id="6d03d-182">2</span></span>           | <span data-ttu-id="6d03d-183">Reservationstype</span><span class="sxs-lookup"><span data-stu-id="6d03d-183">Booking Type</span></span>                 | <span data-ttu-id="6d03d-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="6d03d-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="6d03d-185">3</span><span class="sxs-lookup"><span data-stu-id="6d03d-185">3</span></span>           | <span data-ttu-id="6d03d-186">Rejsekategori</span><span class="sxs-lookup"><span data-stu-id="6d03d-186">Travel Category</span></span>              | <span data-ttu-id="6d03d-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="6d03d-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="6d03d-188">4</span><span class="sxs-lookup"><span data-stu-id="6d03d-188">4</span></span>           | <span data-ttu-id="6d03d-189">Anvendt beløb</span><span class="sxs-lookup"><span data-stu-id="6d03d-189">Dollars Spent</span></span>                | <span data-ttu-id="6d03d-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="6d03d-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="6d03d-191">5</span><span class="sxs-lookup"><span data-stu-id="6d03d-191">5</span></span>           | <span data-ttu-id="6d03d-192">Datoer for ind- og udtjekning</span><span class="sxs-lookup"><span data-stu-id="6d03d-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="6d03d-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="6d03d-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="6d03d-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="6d03d-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="6d03d-195">6</span><span class="sxs-lookup"><span data-stu-id="6d03d-195">6</span></span>           | <span data-ttu-id="6d03d-196">Brug af service</span><span class="sxs-lookup"><span data-stu-id="6d03d-196">Service Usage</span></span>                | <span data-ttu-id="6d03d-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="6d03d-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="6d03d-198">Modeludvælgelse</span><span class="sxs-lookup"><span data-stu-id="6d03d-198">Model selection</span></span>

<span data-ttu-id="6d03d-199">Nu skal vi vælge den optimale algoritme, der skal bruges.</span><span class="sxs-lookup"><span data-stu-id="6d03d-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="6d03d-200">I dette tilfælde er de fleste funktioner baseret på kategorifunktioner.</span><span class="sxs-lookup"><span data-stu-id="6d03d-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="6d03d-201">Modeller, der er baseret på et beslutningstræ, fungerer som regel godt.</span><span class="sxs-lookup"><span data-stu-id="6d03d-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="6d03d-202">Hvis der kun er numeriske funktioner, kan neurale netværk være et bedre valg.</span><span class="sxs-lookup"><span data-stu-id="6d03d-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="6d03d-203">Support Vector Machine (SVM) er også en god kandidat i disse situationer. Det kræver dog en vis justering for at opnå den bedste ydeevne.</span><span class="sxs-lookup"><span data-stu-id="6d03d-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="6d03d-204">Vi vælger en **Boostet beslutningstræ med to klasser**-model som første valg efterfulgt af **SVM med to klasser** som den anden model.</span><span class="sxs-lookup"><span data-stu-id="6d03d-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="6d03d-205">Med Azure Machine Learning Studio kan du udføre A/B-test, så det er fordelagtigt at starte med to modeller i stedet for én.</span><span class="sxs-lookup"><span data-stu-id="6d03d-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="6d03d-206">Følgende billede viser modeloplæringen og evalueringspipelinen fra Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="6d03d-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Afgangsmodel i Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="6d03d-208">Vi anvender også en teknik, der kaldes **Permutation af funktioners vigtighed**, et vigtigt aspekt i forbindelse med modeloptimering.</span><span class="sxs-lookup"><span data-stu-id="6d03d-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="6d03d-209">Indbyggede modeller har kun lidt eller ingen indsigt i en bestemt funktions indflydelse på den endelige forudsigelse.</span><span class="sxs-lookup"><span data-stu-id="6d03d-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="6d03d-210">Ved beregning af vigtigheden af funktioner bruges en brugerdefineret algoritme til at beregne de enkelte funktioners indflydelse på resultatet for en bestemt model.</span><span class="sxs-lookup"><span data-stu-id="6d03d-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="6d03d-211">Vigtigheden af funktionen normaliseres mellem + 1 og -1.</span><span class="sxs-lookup"><span data-stu-id="6d03d-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="6d03d-212">En negativ indflydelse betyder, at den tilsvarende funktion har en kontraintuitiv indvirkning på resultatet og bør fjernes fra modellen.</span><span class="sxs-lookup"><span data-stu-id="6d03d-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="6d03d-213">En positiv indflydelse indikerer, at funktionen i høj grad bidrager til at opfylde forudsigelsen.</span><span class="sxs-lookup"><span data-stu-id="6d03d-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="6d03d-214">Disse værdier er ikke korrelationskoefficienter, da de er forskellige målepunkter.</span><span class="sxs-lookup"><span data-stu-id="6d03d-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="6d03d-215">Du kan finde flere oplysninger i [Permutation af funktioners vigtighed](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="6d03d-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="6d03d-216">Hele [afgangseksperimentet er tilgængeligt i Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="6d03d-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="6d03d-217">Forudsigelse af kundens levetidsværdi</span><span class="sxs-lookup"><span data-stu-id="6d03d-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="6d03d-218">Beregningen af værdien for kundens levetid (customer lifetime value – CLTV) er et af de vigtigste målepunkter, som en virksomhed kan bruge til at vurdere og segmentere kunder.</span><span class="sxs-lookup"><span data-stu-id="6d03d-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="6d03d-219">For hotelvirksomheden er det vigtigt at kende deres kunder.</span><span class="sxs-lookup"><span data-stu-id="6d03d-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="6d03d-220">For eksempel er det vigtigt at have oplysninger, der kan hjælpe med at forstå, hvilke faktorer der skaber gode kunder.</span><span class="sxs-lookup"><span data-stu-id="6d03d-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="6d03d-221">Det hjælper hotellets ledelse at vurdere, hvilke funktioner de skal fokusere på og forbedre for at imødekomme deres højt betalende kunder.</span><span class="sxs-lookup"><span data-stu-id="6d03d-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="6d03d-222">Disse beslutninger kan have direkte indvirkning på salg og indtjening.</span><span class="sxs-lookup"><span data-stu-id="6d03d-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="6d03d-223">Definition af CLTV</span><span class="sxs-lookup"><span data-stu-id="6d03d-223">Definition of CLTV</span></span>

<span data-ttu-id="6d03d-224">I dette eksempel definerer vi CLTV for en kunde som det samlede beløb, som kunden forventes at bruge inden for de næste 365 dage.</span><span class="sxs-lookup"><span data-stu-id="6d03d-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="6d03d-225">Vi vil bruge værdien af de seneste tre års data for alle kunder til at forudse denne værdi.</span><span class="sxs-lookup"><span data-stu-id="6d03d-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="6d03d-226">Videreudvikling af funktioner</span><span class="sxs-lookup"><span data-stu-id="6d03d-226">Featurization</span></span>

<span data-ttu-id="6d03d-227">I dette tilfælde vil videreudvikling af funktioner (featurization) være ligesom i afgangsscenariet.</span><span class="sxs-lookup"><span data-stu-id="6d03d-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="6d03d-228">Men navnene og de forudberegnede værdier adskiller sig fra de ovenfor definerede.</span><span class="sxs-lookup"><span data-stu-id="6d03d-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="6d03d-229">Modeludvælgelse</span><span class="sxs-lookup"><span data-stu-id="6d03d-229">Model selection</span></span>

<span data-ttu-id="6d03d-230">Forudsigelse af CLTV er et regressionsproblem, da den forudberegnede værdi er en positiv, fortløbende variabel.</span><span class="sxs-lookup"><span data-stu-id="6d03d-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="6d03d-231">Afhængigt af funktionsegenskaberne vælger vi **Boostet regression for beslutningstræ** som én algoritme og **Neuralt netværksregression** som en anden algoritme til oplæring af modellen.</span><span class="sxs-lookup"><span data-stu-id="6d03d-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="6d03d-232">Produktanbefaling eller næstbedste handling</span><span class="sxs-lookup"><span data-stu-id="6d03d-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="6d03d-233">Produktanbefalinger i et hotelscenarie fortolkes som anbefaling af servicer, som hotellet tilbyder til kunderne.</span><span class="sxs-lookup"><span data-stu-id="6d03d-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="6d03d-234">Målet er at vælge de rette servicer for kunderne, så deres forbrug maksimeres.</span><span class="sxs-lookup"><span data-stu-id="6d03d-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="6d03d-235">Det svarer til anbefalinger af film for brugere af videostreamingstjenester.</span><span class="sxs-lookup"><span data-stu-id="6d03d-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="6d03d-236">Definition af produktanbefaling eller næstbedste handling</span><span class="sxs-lookup"><span data-stu-id="6d03d-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="6d03d-237">Vi definerer målet som maksimering af beløbet til serviceforbrug ved at tilbyde de bedst egnede servicer til hotelkunder i henhold til deres interesse.</span><span class="sxs-lookup"><span data-stu-id="6d03d-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="6d03d-238">Videreudvikling af funktioner</span><span class="sxs-lookup"><span data-stu-id="6d03d-238">Featurization</span></span>

<span data-ttu-id="6d03d-239">På samme måde som i afgangsmodellen forbinder vi hotellets ServiceCustomerID med CustomerID for at opbygge anbefalinger konsekvent pr. CustomerID.</span><span class="sxs-lookup"><span data-stu-id="6d03d-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Videreudvikling af funktioner i anbefalingsmodellen](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="6d03d-241">Dataene hentes fra tre forskellige objekter, og funktionerne er afledt derfra.</span><span class="sxs-lookup"><span data-stu-id="6d03d-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="6d03d-242">Videreudvikling af funktioner for problemet med anbefaling adskiller sig fra afgangs- eller CLTV-scenarier.</span><span class="sxs-lookup"><span data-stu-id="6d03d-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="6d03d-243">Den anbefalede model kræver inputdata i form af tre sæt funktioner.</span><span class="sxs-lookup"><span data-stu-id="6d03d-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="6d03d-244">Modeludvælgelse</span><span class="sxs-lookup"><span data-stu-id="6d03d-244">Model selection</span></span>

<span data-ttu-id="6d03d-245">Vi anbefaler produkter eller servicer ved hjælp af algoritmen **Train Matchbox Recommender** for at oplære anbefalingsmodellen.</span><span class="sxs-lookup"><span data-stu-id="6d03d-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Produktanbefalingsalgoritme](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="6d03d-247">De tre inputporte for **Train Matchbox Recommender**-modellen bruger oplæringstjenestens forbrugsdata, kundebeskrivelse (valgfri) og servicebeskrivelse.</span><span class="sxs-lookup"><span data-stu-id="6d03d-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="6d03d-248">Der er tre forskellige måder at give modellen point på.</span><span class="sxs-lookup"><span data-stu-id="6d03d-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="6d03d-249">Den ene gælder modelevaluering, hvor NDCG-resultatet (Normalized Discounted Cumulative Gain) beregnes for at rangordne de klassificerede varer.</span><span class="sxs-lookup"><span data-stu-id="6d03d-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="6d03d-250">I dette eksperiment har vi NDCG-resultatet 0,97.</span><span class="sxs-lookup"><span data-stu-id="6d03d-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="6d03d-251">De to andre indstillinger er, at modellen gives point i hele det anbefalede servicekatalog, eller at det kun gives point for elementer, som brugerne ikke har brugt før.</span><span class="sxs-lookup"><span data-stu-id="6d03d-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="6d03d-252">Hvis du vil søge yderligere efter fordelingerne af anbefalingerne i hele servicekataloget, bemærker vi, at telefon, WiFi og kurer er de bedste servicer, der kan anbefales.</span><span class="sxs-lookup"><span data-stu-id="6d03d-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="6d03d-253">Dette stemmer overens med det, vi har fundet fra fordelingerne i dataene for serviceforbruget:</span><span class="sxs-lookup"><span data-stu-id="6d03d-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Anbefalingsmodellens output](media/azure-machine-learning-model-output.png)

<span data-ttu-id="6d03d-255">Du kan få adgang til hele [produktanbefalingseksperimentet i Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="6d03d-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="6d03d-256">Integrer brugerdefinerede modeller</span><span class="sxs-lookup"><span data-stu-id="6d03d-256">Integrate custom models</span></span>

<span data-ttu-id="6d03d-257">Hvis du vil bruge disse forudsigelser i Customer Insights, skal du **eksportere** forudsigelserne sammen med kunde-id'er.</span><span class="sxs-lookup"><span data-stu-id="6d03d-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="6d03d-258">[Eksportér dem til den samme Azure Blob-lagerplacering](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), som du eksporterer kildedataene til.</span><span class="sxs-lookup"><span data-stu-id="6d03d-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="6d03d-259">Webtjenesten til forudsigelse kan planlægges til at køre jævnligt og opdatere resultaterne.</span><span class="sxs-lookup"><span data-stu-id="6d03d-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="6d03d-260">Data, der genereres af den brugerdefinerede model, kan bruges til yderligere at forbedre dine kundedata.</span><span class="sxs-lookup"><span data-stu-id="6d03d-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="6d03d-261">Du kan finde flere oplysninger i [Tilpasse modeller til maskinel indlæring](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="6d03d-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
